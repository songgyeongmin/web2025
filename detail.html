<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // API_KEY는 필요 없습니다 (테스트용)
  // URLParams 관련 코드도 잠시 주석 처리합니다.

  // 임시 더미 데이터
  const testSymbol = "TEST_STOCK";
  const testLabels = ['5/1', '5/2', '5/3', '5/4', '5/5', '5/6', '5/7'];
  const testData = [150.23, 151.50, 149.80, 153.10, 152.00, 154.50, 153.80];

  document.getElementById("stockTitle").textContent = `${testSymbol} 상세 정보 (테스트)`;

  // 기존 API 호출 부분을 주석 처리하거나 제거
  // fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${API_KEY}`) ...

  // 차트 생성 (더미 데이터 사용)
  const ctx = document.getElementById("stockChart").getContext("2d");
  if (ctx) { // 캔버스 컨텍스트가 존재하는지 확인
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: testLabels,
        datasets: [{
          label: `${testSymbol} 종가`,
          data: testData,
          borderColor: '#007bff',
          backgroundColor: 'rgba(0, 123, 255, 0.1)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        scales: {
          x: { title: { display: true, text: '날짜' } },
          y: { title: { display: true, text: '가격 ($)' } }
        }
      }
    });
  } else {
    console.error("캔버스 요소(ID 'stockChart')를 찾을 수 없습니다.");
  }
</script>
